// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/criblio/cribl-control-plane-sdk-go/internal/utils"
)

type RollbackSettings2 struct {
}

func (r RollbackSettings2) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(r, "", false)
}

func (r *RollbackSettings2) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &r, "", false, nil); err != nil {
		return err
	}
	return nil
}

type RollbackSettings1 struct {
	RollbackEnabled bool     `json:"rollbackEnabled"`
	RollbackRetries *float64 `json:"rollbackRetries,omitempty"`
	RollbackTimeout *float64 `json:"rollbackTimeout,omitempty"`
}

func (r RollbackSettings1) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(r, "", false)
}

func (r *RollbackSettings1) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &r, "", false, []string{"rollbackEnabled"}); err != nil {
		return err
	}
	return nil
}

func (r *RollbackSettings1) GetRollbackEnabled() bool {
	if r == nil {
		return false
	}
	return r.RollbackEnabled
}

func (r *RollbackSettings1) GetRollbackRetries() *float64 {
	if r == nil {
		return nil
	}
	return r.RollbackRetries
}

func (r *RollbackSettings1) GetRollbackTimeout() *float64 {
	if r == nil {
		return nil
	}
	return r.RollbackTimeout
}

type RollbackSettingsUnionType string

const (
	RollbackSettingsUnionTypeRollbackSettings1 RollbackSettingsUnionType = "RollbackSettings_1"
	RollbackSettingsUnionTypeRollbackSettings2 RollbackSettingsUnionType = "RollbackSettings_2"
)

type RollbackSettingsUnion struct {
	RollbackSettings1 *RollbackSettings1 `queryParam:"inline" union:"member"`
	RollbackSettings2 *RollbackSettings2 `queryParam:"inline" union:"member"`

	Type RollbackSettingsUnionType
}

func CreateRollbackSettingsUnionRollbackSettings1(rollbackSettings1 RollbackSettings1) RollbackSettingsUnion {
	typ := RollbackSettingsUnionTypeRollbackSettings1

	return RollbackSettingsUnion{
		RollbackSettings1: &rollbackSettings1,
		Type:              typ,
	}
}

func CreateRollbackSettingsUnionRollbackSettings2(rollbackSettings2 RollbackSettings2) RollbackSettingsUnion {
	typ := RollbackSettingsUnionTypeRollbackSettings2

	return RollbackSettingsUnion{
		RollbackSettings2: &rollbackSettings2,
		Type:              typ,
	}
}

func (u *RollbackSettingsUnion) UnmarshalJSON(data []byte) error {

	var rollbackSettings1 RollbackSettings1 = RollbackSettings1{}
	if err := utils.UnmarshalJSON(data, &rollbackSettings1, "", true, nil); err == nil {
		u.RollbackSettings1 = &rollbackSettings1
		u.Type = RollbackSettingsUnionTypeRollbackSettings1
		return nil
	}

	var rollbackSettings2 RollbackSettings2 = RollbackSettings2{}
	if err := utils.UnmarshalJSON(data, &rollbackSettings2, "", true, nil); err == nil {
		u.RollbackSettings2 = &rollbackSettings2
		u.Type = RollbackSettingsUnionTypeRollbackSettings2
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for RollbackSettingsUnion", string(data))
}

func (u RollbackSettingsUnion) MarshalJSON() ([]byte, error) {
	if u.RollbackSettings1 != nil {
		return utils.MarshalJSON(u.RollbackSettings1, "", true)
	}

	if u.RollbackSettings2 != nil {
		return utils.MarshalJSON(u.RollbackSettings2, "", true)
	}

	return nil, errors.New("could not marshal union type RollbackSettingsUnion: all fields are null")
}
