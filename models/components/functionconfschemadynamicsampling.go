// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"github.com/criblio/cribl-control-plane-sdk-go/internal/utils"
)

// SampleMode - Defines how sample rate will be derived: log(previousPeriodCount) or sqrt(previousPeriodCount)
type SampleMode string

const (
	// SampleModeLog Logarithmic
	SampleModeLog SampleMode = "log"
	// SampleModeSqrt Square Root
	SampleModeSqrt SampleMode = "sqrt"
)

func (e SampleMode) ToPointer() *SampleMode {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *SampleMode) IsExact() bool {
	if e != nil {
		switch *e {
		case "log", "sqrt":
			return true
		}
	}
	return false
}

type FunctionConfSchemaDynamicSampling struct {
	// Defines how sample rate will be derived: log(previousPeriodCount) or sqrt(previousPeriodCount)
	Mode *SampleMode `json:"mode,omitempty"`
	// Expression used to derive sample group key. Example:`${domain}:${status}`. Each sample group will have its own derived sampling rate based on volume. Defaults to `${host}`.
	KeyExpr *string `json:"keyExpr,omitempty"`
	// How often (in seconds) sample rates will be adjusted
	SamplePeriod *float64 `json:"samplePeriod,omitempty"`
	// Minimum number of events that must be received in previous sample period for sampling mode to be applied to current period. If the number of events received for a sample group is less than this minimum, a sample rate of 1:1 is used.
	MinEvents *float64 `json:"minEvents,omitempty"`
	// Maximum sampling rate. If computed sampling rate is above this value, it will be limited to this value.
	MaxSampleRate *float64 `json:"maxSampleRate,omitempty"`
}

func (f FunctionConfSchemaDynamicSampling) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(f, "", false)
}

func (f *FunctionConfSchemaDynamicSampling) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &f, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (f *FunctionConfSchemaDynamicSampling) GetMode() *SampleMode {
	if f == nil {
		return nil
	}
	return f.Mode
}

func (f *FunctionConfSchemaDynamicSampling) GetKeyExpr() *string {
	if f == nil {
		return nil
	}
	return f.KeyExpr
}

func (f *FunctionConfSchemaDynamicSampling) GetSamplePeriod() *float64 {
	if f == nil {
		return nil
	}
	return f.SamplePeriod
}

func (f *FunctionConfSchemaDynamicSampling) GetMinEvents() *float64 {
	if f == nil {
		return nil
	}
	return f.MinEvents
}

func (f *FunctionConfSchemaDynamicSampling) GetMaxSampleRate() *float64 {
	if f == nil {
		return nil
	}
	return f.MaxSampleRate
}
