// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"github.com/criblio/cribl-control-plane-sdk-go/internal/utils"
)

type DatabaseCollectorConfHiddenDefaultBreakers string

const (
	DatabaseCollectorConfHiddenDefaultBreakersCribl DatabaseCollectorConfHiddenDefaultBreakers = "Cribl"
)

func (e DatabaseCollectorConfHiddenDefaultBreakers) ToPointer() *DatabaseCollectorConfHiddenDefaultBreakers {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *DatabaseCollectorConfHiddenDefaultBreakers) IsExact() bool {
	if e != nil {
		switch *e {
		case "Cribl":
			return true
		}
	}
	return false
}

type DatabaseCollectorConfStateTracking struct {
	// Enable tracking of collection progress between consecutive scheduled executions.
	Enabled *bool `json:"enabled,omitempty"`
}

func (d DatabaseCollectorConfStateTracking) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DatabaseCollectorConfStateTracking) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DatabaseCollectorConfStateTracking) GetEnabled() *bool {
	if d == nil {
		return nil
	}
	return d.Enabled
}

type DatabaseCollectorConfScheduling struct {
	StateTracking *DatabaseCollectorConfStateTracking `json:"stateTracking,omitempty"`
}

func (d DatabaseCollectorConfScheduling) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DatabaseCollectorConfScheduling) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (d *DatabaseCollectorConfScheduling) GetStateTracking() *DatabaseCollectorConfStateTracking {
	if d == nil {
		return nil
	}
	return d.StateTracking
}

type DatabaseCollectorConf struct {
	// Select an existing Connection, or go to Knowledge > Database Connections to add one
	ConnectionID string `json:"connectionId"`
	// An expression that resolves to the query string for selecting data from the database. Has access to the special ${earliest} and ${latest} variables, which will resolve to the Collector run's start and end time.
	Query string `json:"query"`
	// Enforces a basic query validation that allows only a single 'select' statement. Disable for more complex queries or when using semicolons. Caution: Disabling query validation allows DDL and DML statements to be executed, which could be destructive to your database.
	QueryValidationEnabled *bool                                       `default:"true" json:"queryValidationEnabled"`
	DefaultBreakers        *DatabaseCollectorConfHiddenDefaultBreakers `json:"defaultBreakers,omitempty"`
	Scheduling             *DatabaseCollectorConfScheduling            `json:"__scheduling,omitempty"`
}

func (d DatabaseCollectorConf) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(d, "", false)
}

func (d *DatabaseCollectorConf) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &d, "", false, []string{"connectionId", "query"}); err != nil {
		return err
	}
	return nil
}

func (d *DatabaseCollectorConf) GetConnectionID() string {
	if d == nil {
		return ""
	}
	return d.ConnectionID
}

func (d *DatabaseCollectorConf) GetQuery() string {
	if d == nil {
		return ""
	}
	return d.Query
}

func (d *DatabaseCollectorConf) GetQueryValidationEnabled() *bool {
	if d == nil {
		return nil
	}
	return d.QueryValidationEnabled
}

func (d *DatabaseCollectorConf) GetDefaultBreakers() *DatabaseCollectorConfHiddenDefaultBreakers {
	if d == nil {
		return nil
	}
	return d.DefaultBreakers
}

func (d *DatabaseCollectorConf) GetScheduling() *DatabaseCollectorConfScheduling {
	if d == nil {
		return nil
	}
	return d.Scheduling
}
