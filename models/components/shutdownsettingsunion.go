// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/criblio/cribl-control-plane-sdk-go/internal/utils"
)

type ShutdownSettings2 struct {
}

func (s ShutdownSettings2) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *ShutdownSettings2) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, nil); err != nil {
		return err
	}
	return nil
}

type ShutdownSettings1 struct {
	DrainTimeout float64 `json:"drainTimeout"`
}

func (s ShutdownSettings1) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(s, "", false)
}

func (s *ShutdownSettings1) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &s, "", false, []string{"drainTimeout"}); err != nil {
		return err
	}
	return nil
}

func (s *ShutdownSettings1) GetDrainTimeout() float64 {
	if s == nil {
		return 0.0
	}
	return s.DrainTimeout
}

type ShutdownSettingsUnionType string

const (
	ShutdownSettingsUnionTypeShutdownSettings1 ShutdownSettingsUnionType = "ShutdownSettings_1"
	ShutdownSettingsUnionTypeShutdownSettings2 ShutdownSettingsUnionType = "ShutdownSettings_2"
)

type ShutdownSettingsUnion struct {
	ShutdownSettings1 *ShutdownSettings1 `queryParam:"inline,name=ShutdownSettings"`
	ShutdownSettings2 *ShutdownSettings2 `queryParam:"inline,name=ShutdownSettings"`

	Type ShutdownSettingsUnionType
}

func CreateShutdownSettingsUnionShutdownSettings1(shutdownSettings1 ShutdownSettings1) ShutdownSettingsUnion {
	typ := ShutdownSettingsUnionTypeShutdownSettings1

	return ShutdownSettingsUnion{
		ShutdownSettings1: &shutdownSettings1,
		Type:              typ,
	}
}

func CreateShutdownSettingsUnionShutdownSettings2(shutdownSettings2 ShutdownSettings2) ShutdownSettingsUnion {
	typ := ShutdownSettingsUnionTypeShutdownSettings2

	return ShutdownSettingsUnion{
		ShutdownSettings2: &shutdownSettings2,
		Type:              typ,
	}
}

func (u *ShutdownSettingsUnion) UnmarshalJSON(data []byte) error {

	var shutdownSettings1 ShutdownSettings1 = ShutdownSettings1{}
	if err := utils.UnmarshalJSON(data, &shutdownSettings1, "", true, nil); err == nil {
		u.ShutdownSettings1 = &shutdownSettings1
		u.Type = ShutdownSettingsUnionTypeShutdownSettings1
		return nil
	}

	var shutdownSettings2 ShutdownSettings2 = ShutdownSettings2{}
	if err := utils.UnmarshalJSON(data, &shutdownSettings2, "", true, nil); err == nil {
		u.ShutdownSettings2 = &shutdownSettings2
		u.Type = ShutdownSettingsUnionTypeShutdownSettings2
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for ShutdownSettingsUnion", string(data))
}

func (u ShutdownSettingsUnion) MarshalJSON() ([]byte, error) {
	if u.ShutdownSettings1 != nil {
		return utils.MarshalJSON(u.ShutdownSettings1, "", true)
	}

	if u.ShutdownSettings2 != nil {
		return utils.MarshalJSON(u.ShutdownSettings2, "", true)
	}

	return nil, errors.New("could not marshal union type ShutdownSettingsUnion: all fields are null")
}
